<!DOCTYPE html>
<meta charset="utf-8">
<style>

/* CSS goes here. */

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script>

    var width = 960,
        height = 1160;

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    var projection = d3.geo.transverseMercator()
            .rotate([72.57, -44.20])
            .translate([175,185])
            .scale([12000]);

    // Define path generator
    var path = d3.geo.path()
        .projection(projection);

    d3.json("vermont.json", function(error, vt) {

        svg.append("path")
            .datum(topojson.feature(vt, vt.objects.vt_towns))
            .attr("d", path)
            .style("stroke", "#777")
            .style("stroke-width", "1");

        svg.selectAll(".subunit")
                .data(topojson.feature(vt, vt.objects.vt_towns).features)
                .enter().append("path")
                    .attr("d", path)
                    .style("fill", "#ccc")

                    .on("mouseover", function(d) {
                        var xPosition = d3.mouse(this)[0];
                        var yPosition = d3.mouse(this)[1] + 30;

                        svg.append("text")
                            .attr("id", "tooltip")
                            .attr("x", xPosition)
                            .attr("y", yPosition)
                            .attr("text-anchor", "middle")
                            .attr("font-family", "sans-serif")
                            .attr("font-size", "11px")
                            .attr("font-weight", "bold")
                            .attr("fill", "black")
                            .text(d.properties.town)

                        d3.select(this)
                            .style("fill", "#509e2f");
                    })
                    .on("mouseout", function(d) {
                        d3.select("#tooltip").remove();

                        d3.select(this)
                            .transition()
                            .duration(250)
                            .style("fill", "#ccc")
                    });

        svg.append("path")
            .datum(topojson.feature(vt, vt.objects.lake))
            .attr("d", path)
            .style("stroke", "#89b6ef")
            .style("stroke-width", "1px")
            .style("fill", "#7aadec");

        /*
        svg.append("path")
            .datum(topojson.feature(vt, vt.objects.vt_water_nolake))
            .attr("d", path)
            .style("fill", "#7aadec");
            */
    });

</script>
